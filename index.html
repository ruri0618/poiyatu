<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒãƒ­ãƒ—ãƒ­ ãƒ¢ãƒã‚¬ãƒãƒ£2025</title>
  <style>
    .rainbow-text {
      background: linear-gradient(to right, red, orange, yellow, green, cyan, blue, violet);
      -webkit-background-clip: text;
      color: transparent;
      animation: rainbow 3s infinite;
      font-weight: bold;
    }
    @keyframes rainbow {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }
    .video-container {
      position: relative;
      display: inline-block;
      margin-top: 20px;
    }
    #overlay {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.5);
      color: #fff;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 14px;
    }
  </style>
</head>
<body style="font-family: Arial, sans-serif; text-align: center; padding: 30px;">
  <h1>âœ¨ãƒãƒ­ãƒ—ãƒ­ãƒ¢ãƒã‚¬ãƒãƒ£ 2025 ãƒŸãƒ‹ã‚¢ãƒ—ãƒªâœ¨</h1>
  <button id="gachaButton" style="font-size:24px; padding:10px 20px;">ã‚¬ãƒãƒ£ã‚’å›ã™âœ¨</button>
  <button id="gacha10Button" style="font-size:20px; padding:8px 16px; margin-top:10px;">10é€£ã‚¬ãƒãƒ£âœ¨</button>
  <button id="gacha100Button" style="font-size:20px; padding:8px 16px; margin-top:10px;">100é€£ã‚¬ãƒãƒ£âœ¨</button>
  <button id="gachaUntilSRButton" style="font-size:20px; padding:8px 16px; margin-top:10px;">SRãŒå‡ºã‚‹ã¾ã§ã‚¬ãƒãƒ£âœ¨</button>
  <div style="margin-top:20px;">
    <input id="oshiInput" type="text" placeholder="æ¨ã—ã®åå‰ã‚’å…¥åŠ›" style="font-size:18px; padding:5px;">
    <button id="oshiGachaButton" style="font-size:18px; padding:5px 10px;">æ¨ã—SRãŒå‡ºã‚‹ã¾ã§ã‚¬ãƒãƒ£âœ¨</button>
  </div>

  <!-- å‹•ç”»ã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¡¨ç¤º -->
  <div class="video-container">
    <video id="promoVideo" src="path/to/video.mp4" controls style="max-width:100%;"></video>
    <div id="overlay">N: 0, R: 0, SR: 0</div>
  </div>

  <h2 id="result" style="margin-top:30px; white-space:pre-line;">ã“ã“ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™</h2>

<script>
const members = [
  "ç”Ÿç”°è¡£æ¢¨å¥ˆ","å°ç”°ã•ãã‚‰","é‡ä¸­ç¾å¸Œ","ç‰§é‡çœŸè‰æ„›","ç¾½è³€æœ±éŸ³","æ¨ªå±±ç²å¥ˆ","åŒ—å·è‰å¤®","å²¡æ‘ã»ã¾ã‚Œ","å±±ï¨‘æ„›ç”Ÿ","æ«»äº•æ¢¨å¤®","äº•ä¸Šæ˜¥è¯","å¼“æ¡æœ±ç´",
  "ä¸Šåœ‹æ–™èŒè¡£","ä¼Šå‹¢éˆ´è˜­","æ©‹è¿«éˆ´","å·åå‡œ","ç‚ºæ°¸å¹¸éŸ³","æ¾æœ¬ã‚ã‹ãª","å¹³å±±éŠå­£","ä¸‹äº•è°·å¹¸ï¿½Â€ï¿½"å¾Œè—¤èŠ±",
  "æ®µåŸç‘ ã€…","äº•ä¸Šç²éŸ³","å·¥è—¤ç”±æ„›","æ¾æ°¸é‡Œæ„›","æœ‰æ¾¤ä¸€è¯","å…¥æ±Ÿé‡Œå’²","æ±Ÿç«¯å¦ƒå’²","çŸ³å±±å’²è‰¯","é è—¤å½©åŠ é‡Œ",
  "å·å¶‹ç¾æ¥“","è°·æœ¬å®‰ç¾","å°é‡ç‘æ­©","å°é‡ç”°ç´—æ ","ç§‹å±±çœç·’","æ²³è¥¿çµå¿ƒ","å…«æœ¨æ ","ç¦ç”°çœŸç³","è±«é¢¨ç‘ ä¹ƒ",
  "çŸ³äº•æ³‰ç¾½","æ‘ç”°çµç”Ÿ","åœŸå±…æ¥“å¥","å³¶å€‰ã‚Šã‹","è¥¿ç”°æ±é‡Œ","æ±Ÿå£ç´—è€¶","é«˜ç€¬ãã‚‹ã¿","å‰ç”°ã“ã“ã‚","å²¡æ‘ç¾æ³¢",
  "æ¸…é‡æ¡ƒã€…å§«","å¹³äº•ç¾è‘‰","é‡Œå‰ã†ãŸã®","å°æ—èŒèŠ±","æ–‰è—¤å††é¦™","åºƒæœ¬ç‘ ç’ƒ","ç±³æ‘å§«è‰¯ã€…","çªªç”°ä¸ƒæµ·","ä¸­å±±å¤æœˆå§«",
  "è¥¿ï¨‘ç¾ç©º","åŒ—åŸã‚‚ã‚‚","ç­’äº•æ¾ªå¿ƒ","æ©‹ç”°æ­©æœ","å‰ç”°å§«æ·","å°é‡ç”°è¯å‡œ","æ‘è¶Šå½©èœ","æ¤æ‘è‘‰ç´”","æ¾åŸãƒ¦ãƒªãƒ¤",
  "å³¶å·æ³¢èœ","ä¸Šæ‘éº—èœ","ç›¸é¦¬å„ªèŠ½"
];

const rarities = [
  { type: "N", rate: 65 },
  { type: "R", rate: 30 },
  { type: "SR", rate: 5 }
];

function getRandomRarity() {
  let rand = Math.random() * 100;
  let sum = 0;
  for (const rarity of rarities) {
    sum += rarity.rate;
    if (rand <= sum) return rarity.type;
  }
  return rarities[rarities.length - 1].type;
}

function findExactName(input) {
  return members.includes(input) ? input : null;
}

function drawGacha(times, untilSR = false, targetMember = null) {
  let results = [];
  let count = 0;
  let srHit = false;
  let oshiResult = null;

  do {
    const member = members[Math.floor(Math.random() * members.length)];
    const rarity = getRandomRarity();
    let item = "";
    if (rarity === "N") item = Math.random() < 0.5 ? "ç¼¶ãƒãƒƒã‚¸" : "ã‚¹ãƒ†ãƒƒã‚«ãƒ¼";
    else if (rarity === "R") item = "ã‚­ãƒ¼ãƒ›ãƒ«ãƒ€ãƒ¼";
    else if (rarity === "SR") item = "BIGã‚¢ã‚¯ãƒªãƒ«ã‚¹ã‚¿ãƒ³ãƒ‰";
    const resultItem = { rarity, member, item };
    results.push(resultItem);

    if (untilSR) {
      if (targetMember) {
        if (rarity === "SR" && member === targetMember) {
          srHit = true;
          oshiResult = resultItem;
          break;
        }
      } else {
        if (rarity === "SR") {
          srHit = true;
          break;
        }
      }
    }
    count++;
  } while (count < times || untilSR);

  if (oshiResult) {
    results = results.filter(r => !(r.member === oshiResult.member && r.rarity === oshiResult.rarity && r.item === oshiResult.item));
  }

  results.sort((a, b) => {
    const order = { "SR": 0, "R": 1, "N": 2 };
    if (order[a.rarity] !== order[b.rarity]) return order[a.rarity] - order[b.rarity];
    return members.indexOf(a.member) - members.indexOf(b.member);
  });

  // ã‚«ã‚¦ãƒ³ãƒˆ
  const countN = results.filter(r => r.rarity === "N").length;
  const countR = results.filter(r => r.rarity === "R").length;
  const countSR = results.filter(r => r.rarity === "SR").length;
  document.getElementById('overlay').textContent = `N: ${countN}, R: ${countR}, SR: ${countSR}`;

  results = results.map(r => {
    if (r.rarity === "SR") {
      return { ...r, display: `<span class="rainbow-text">${r.rarity}ï¼š${r.member} - ${r.item}</span>` };
    } else {
      return { ...r, display: `${r.rarity}ï¼š${r.member} - ${r.item}` };
    }
  });

  if (oshiResult) {
    oshiResult.display = `<span style="font-size:24px; font-weight:bold; color:#FF69B4;">${oshiResult.rarity}ï¼š${oshiResult.member} - ${oshiResult.item}</span>`;
    results.unshift(oshiResult);
  }

  let displayText = results.map(r => r.display).join("<br>");
  if (untilSR && srHit) {
    const totalCost = count * 500;
    displayText = `ğŸ‰âœ¨ğŸŠ ${count}å›ã§` +
                  (targetMember ? `${targetMember} ã®SR` : `SR`) +
                  `ãŒå‡ºã¾ã—ãŸï¼ï¼ˆåˆè¨ˆ ${totalCost.toLocaleString()}å††ï¼‰ğŸŠâœ¨ğŸ‰<br><br>` + displayText;
  }
  document.getElementById("result").innerHTML = displayText;
}

["gachaButton","gacha10Button","gacha100Button","gachaUntilSRButton"].forEach((id, idx) => {
  const times = idx === 0 ? 1 : idx === 1 ? 10 : idx === 2 ? 100 : 1;
  const untilSR = id === "gachaUntilSRButton";
  document.getElementById(id).addEventListener("click", () => drawGacha(times, untilSR));
});

document.getElementById("oshiGachaButton").addEventListener("click", () => {
  const input = document.getElementById("oshiInput").value.trim();
  const corrected = findExactName(input);
  if (!corrected) return alert("ãã®ãƒ¡ãƒ³ãƒãƒ¼ã¯ã„ãªã„ã‚ˆï¼");
  drawGacha(9999, true, corrected);
});
</script>
</body>
</html>
